import { done, isStarted, start } from "nprogress";
import {
	getRootEl,
	initClient,
	revalidateOnWindowFocus,
	setupGlobalLoadingIndicator,
} from "river.now/client";
import { render } from "solid-js/web";
import { App } from "./app.tsx";
import { apiConfig } from "./river.gen.ts";

await initClient(
	() => {
		render(() => <App />, getRootEl());
	},
	{ apiConfig },
);

setupGlobalLoadingIndicator({ start, stop: done, isRunning: isStarted });
revalidateOnWindowFocus({ staleTimeMS: 10_000 });
