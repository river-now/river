import { done, isStarted, start } from "nprogress";
import { render } from "preact";
import {
	getRootEl,
	initClient,
	revalidateOnWindowFocus,
	setupGlobalLoadingIndicator,
} from "river.now/client";
import { App } from "./components/app.tsx";
import { riverAppConfig } from "./river.gen.ts";

await initClient({
	riverAppConfig,
	renderFn: () => {
		render(<App />, getRootEl());
	},
});

setupGlobalLoadingIndicator({ start, stop: done, isRunning: isStarted });
revalidateOnWindowFocus({ staleTimeMS: 10_000 });
